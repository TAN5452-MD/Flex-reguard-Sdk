{"code":"const options = JSON.parse(localStorage.getItem('info'));\r\n// 兼容性判断\r\nconst compatibility = {\r\n    canUseSendBeacon: !!navigator.sendBeacon,\r\n};\r\nexport default function reportTracker(url, params) {\r\n    params = Object.assign(params, { uuid: options.uuid, sdkversion: options.sdkVersion }, { reportTime: new Date().getTime() });\r\n    console.log(params);\r\n    if (compatibility.canUseSendBeacon && params) {\r\n        let headers = {\r\n            type: \"application/x-www-form-urlencoded\",\r\n        };\r\n        //封装blob\r\n        let blob = new Blob([JSON.stringify(params)], headers);\r\n        navigator.sendBeacon(url, blob);\r\n    }\r\n    else {\r\n        // 使用img标签上报\r\n        const img = new Image();\r\n        img.src = `${url}?data=${encodeURIComponent(JSON.stringify(params))}`;\r\n    }\r\n}\r\n","references":["F:/gitwork/reGuard-sdk/src/type/IOptions.ts"]}
